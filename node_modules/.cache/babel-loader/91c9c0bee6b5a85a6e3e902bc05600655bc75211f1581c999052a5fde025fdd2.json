{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RestaurantsByCity=()=>{const[cities,setCities]=useState([]);const[selectedCity,setSelectedCity]=useState(\"\");const[restaurants,setRestaurants]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);useEffect(()=>{// Fetch all restaurants to extract unique cities\naxios.get(\"https://server2-jbon.onrender.com \").then(response=>{if(response.data&&Array.isArray(response.data)){const uniqueCities=[...new Set(response.data.map(r=>r.city))];setCities(uniqueCities);}}).catch(error=>console.error(\"Error fetching cities:\",error));},[]);const handleCityChange=event=>{const city=event.target.value;setSelectedCity(city);setLoading(true);setError(null);axios.get(`http://localhost:5400/getRestaurantsByCity/${city}`).then(response=>{if(response.data.restaurantList&&Array.isArray(response.data.restaurantList)){setRestaurants(response.data.restaurantList);}else{setRestaurants([]);}}).catch(error=>{setError(\"Failed to fetch restaurants.\");setLoading(false);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Zomato Clone \\uD83C\\uDF7D\\uFE0F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Select a City: \"}),/*#__PURE__*/_jsxs(\"select\",{onChange:handleCityChange,value:selectedCity,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select --\"}),cities.map((city,index)=>/*#__PURE__*/_jsx(\"option\",{value:city,children:city},index))]})]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"loading\",children:\"Loading restaurants...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-list\",children:restaurants.length>0?restaurants.map(restaurant=>/*#__PURE__*/_jsx(\"div\",{className:\"restaurant-card\",children:/*#__PURE__*/_jsxs(Link,{to:`/restaurant/${restaurant.id}`,className:\"restaurant-link\",children:[/*#__PURE__*/_jsx(\"img\",{src:restaurant.image||\"/default-restaurant.jpg\"// Default image if not provided\n,alt:restaurant.restaurant,className:\"restaurant-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"restaurant-details\",children:[/*#__PURE__*/_jsx(\"h2\",{children:restaurant.restaurant}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCCD \",restaurant.city]})]})]})},restaurant.id)):/*#__PURE__*/_jsx(\"p\",{className:\"no-data\",children:\"No restaurants found for this city.\"})})]});};export default RestaurantsByCity;","map":{"version":3,"names":["React","useEffect","useState","Link","axios","jsx","_jsx","jsxs","_jsxs","RestaurantsByCity","cities","setCities","selectedCity","setSelectedCity","restaurants","setRestaurants","loading","setLoading","error","setError","get","then","response","data","Array","isArray","uniqueCities","Set","map","r","city","catch","console","handleCityChange","event","target","value","restaurantList","className","children","onChange","index","length","restaurant","to","id","src","image","alt"],"sources":["D:/MIN MERN/ZomatoData/Phase-4/client/src/RestaurantByCity.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./App.css\";\n\n\nconst RestaurantsByCity = () => {\n  const [cities, setCities] = useState([]);\n  const [selectedCity, setSelectedCity] = useState(\"\");\n  const [restaurants, setRestaurants] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    // Fetch all restaurants to extract unique cities\n    axios\n      .get(\"https://server2-jbon.onrender.com \")\n      .then((response) => {\n        if (response.data && Array.isArray(response.data)) {\n          const uniqueCities = [\n            ...new Set(response.data.map((r) => r.city)),\n          ];\n          setCities(uniqueCities);\n        }\n      })\n      .catch((error) => console.error(\"Error fetching cities:\", error));\n  }, []);\n\n  const handleCityChange = (event) => {\n    const city = event.target.value;\n    setSelectedCity(city);\n    setLoading(true);\n    setError(null);\n\n    axios\n      .get(`http://localhost:5400/getRestaurantsByCity/${city}`)\n      .then((response) => {\n        if (response.data.restaurantList && Array.isArray(response.data.restaurantList)) {\n          setRestaurants(response.data.restaurantList);\n        } else {\n          setRestaurants([]);\n        }\n      })\n      .catch((error) => {\n        setError(\"Failed to fetch restaurants.\");\n        setLoading(false);\n      });\n  };\n\n  return (\n    <div className=\"container\">\n      <h1 className=\"title\">Zomato Clone üçΩÔ∏è</h1>\n\n      {/* Dropdown to select a city */}\n      <div className=\"dropdown-container\">\n        <label>Select a City: </label>\n        <select onChange={handleCityChange} value={selectedCity}>\n          <option value=\"\">-- Select --</option>\n          {cities.map((city, index) => (\n            <option key={index} value={city}>\n              {city}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      {/* Loading & Error Messages */}\n      {loading && <p className=\"loading\">Loading restaurants...</p>}\n      {error && <p className=\"error\">{error}</p>}\n\n      {/* Restaurant List */}\n      <div className=\"restaurant-list\">\n        {restaurants.length > 0 ? (\n          restaurants.map((restaurant) => (\n            <div key={restaurant.id} className=\"restaurant-card\">\n              {/* Link to restaurant details page */}\n              <Link to={`/restaurant/${restaurant.id}`} className=\"restaurant-link\">\n                <img\n                  src={restaurant.image || \"/default-restaurant.jpg\"} // Default image if not provided\n                  alt={restaurant.restaurant}\n                  className=\"restaurant-image\"\n                />\n                <div className=\"restaurant-details\">\n                  <h2>{restaurant.restaurant}</h2>\n                  <p>üìç {restaurant.city}</p>\n                </div>\n              </Link>\n            </div>\n          ))\n        ) : (\n          <p className=\"no-data\">No restaurants found for this city.</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default RestaurantsByCity;\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}